id: t04_multilocation_recharge_then_fasten
name: Multi-location with recharge before assembly
description: |
  The robot starts away from the bench with low energy. It must recharge at the dock,
  fetch and equip the tool from a bin at the cell, move to the bench, align, and fasten.

meta:
  domain: assembly
  enable_numeric: true
  enable_conditional: true
  enable_durations: true
  enable_stochastic: false
  max_steps: 20
  seed: 104
  init_fluents:
    - ["battery-cap", ["robot"], 8]
    - ["energy", ["robot"], 2]     # too low for all required moves â†’ must recharge

objects:
  robot:  {types: [robot],    variants: [r1, bot, assembler]}
  dock:   {types: [location], variants: [dock, charger, bay]}
  cell:   {types: [location], variants: [cell, workstation, cellA]}
  bench:  {types: [location], variants: [bench, workbench, table]}
  bin:    {types: [container], variants: [bin1, tote, crate, box]}
  tool:   {types: [tool],     variants: [drv, screwdriver, driver, wrench]}
  part:   {types: [part],     variants: [p1, partA, plate]}
  asm:    {types: [assembly], variants: [asm1, frame, chassis]}

static_facts:
  - (tool-for tool asm)
  - (adjacent dock cell)
  - (adjacent cell dock)
  - (adjacent cell bench)
  - (adjacent bench cell)
  - (has-charger dock)

init:
  - (at robot cell)
  - (obj-at bin cell)
  - (in tool bin)          # tool is in the bin
  - (obj-at part bench)
  - (obj-at asm bench)
  - (clear-hand robot)

termination:
  - name: goal
    when: "(and (installed part asm) (fastened part asm))"
    outcome: success
    reward: 1.0

reference_plan:
  - (move robot cell dock)
  - (recharge robot dock)
  - (move robot dock cell)
  - (open robot bin)
  - (take-out robot tool bin)
  - (equip-tool robot tool)
  - (move robot cell bench)
  - (align robot part asm)
  - (fasten robot part asm tool)
