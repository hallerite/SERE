id: t10_full_constraints_time_energy_power
name: Full constraints; time + energy + power
description: |
  Hardest variant: must recharge once, power on the kettle, heat twice from 40Â°C,
  and finish at the table under a time limit.

meta:
  domain: kitchen
  enable_numeric: true
  enable_conditional: true
  enable_durations: true
  max_steps: 28
  time_limit: 23
  seed: 210
  init_fluents:
    - ["battery-cap", ["robot"], 8]
    - ["energy", ["robot"], 2]
    - ["water-temp", ["heater"], 40.0]
  reward_shaping:
    mode: instant
    milestones:
      - {expr: "(>= (energy robot) 5)", reward: 0.05, once: true}
      - {expr: "(powered heater)", reward: 0.05, once: true}
      - {expr: "(>= (water-temp heater) 80)", reward: 0.10, once: true}
      - {expr: "(in leaf cup)", reward: 0.05, once: true}
      - {expr: "(has-hot-water cup)", reward: 0.10, once: true}

objects:
  robot:
    types: [robot]
    variants: [r1, bot]
  hallway: location
  kitchen: location
  pantry: location
  table: location
  cup:
    types: [container]
    variants: [mug, cup, beaker, tumbler]
  heater:
    types: [container, appliance]
    variants: [kettle, boiler, samovar, urn]
  leaf:
    types: [object]
    variants: [teabag, sachet]

static_facts:
  - (has-charger hallway)
  - (adjacent hallway kitchen)
  - (adjacent kitchen hallway)
  - (adjacent kitchen pantry)
  - (adjacent pantry kitchen)
  - (adjacent kitchen table)
  - (adjacent table kitchen)
  - (openable heater)

init:
  - (at robot hallway)
  - (obj-at heater kitchen)
  - (obj-at cup kitchen)
  - (obj-at leaf pantry)
  - (clear-hand robot)

termination:
  - name: goal
    when: "(and (tea-ready cup) (at robot table))"
    outcome: success
    reward: 1.0
  - name: spill_fail
    when: "(spilled cup)"
    outcome: spilled
    reward: -1.0

reference_plan:
  - (recharge robot hallway)
  - (move robot hallway kitchen)
  - (power-on robot heater)
  - (heat-kettle robot heater 3)
  - (open robot heater)
  - (move robot kitchen pantry)
  - (pick-up robot leaf)
  - (move robot pantry kitchen)
  - (put-in robot leaf cup)
  - (pour robot heater cup)
  - (steep-tea robot leaf cup)
  - (move robot kitchen table)