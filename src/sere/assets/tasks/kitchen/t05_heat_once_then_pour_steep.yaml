id: t05_heat_once_then_pour_steep
name: Five steps; heat once, open mug, pour, steep
description: |
  Kettle is powered & closed but only warm (60Â°C). Heat once to reach â‰¥80, then pour & steep.
  (Teabag already in mug.)

meta:
  domain: kitchen
  enable_numeric: true
  enable_conditional: true
  enable_durations: true
  max_steps: 10
  time_limit: 7.5
  seed: 205
  init_fluents:
    - ["battery-cap", ["r1"], 8]
    - ["energy", ["r1"], 8]
    - ["water-temp", ["heater"], 60.0]
  reward_shaping:
    mode: instant
    milestones:
      - {expr: "(>= (water-temp heater) 80)", reward: 0.10, once: true}
      - {expr: "(has-hot-water cup)", reward: 0.10, once: true}

objects:
  r1: robot
  kitchen: location
  cup:
    types: [container]
    variants: [mug1, cup, beaker, tumbler]
  heater:
    types: [container, appliance]
    variants: [kettle1, boiler, samovar, urn]
  leaf:
    types: [object]
    variants: [teabag1, sachet]

static_facts:
  - (openable heater)

init:
  - (at r1 kitchen)
  - (obj-at cup kitchen)
  - (obj-at heater kitchen)
  - (powered heater)
  - (in leaf cup)
  - (clear-hand r1)

termination:
  - name: success_tea
    when: "(tea-ready cup)"
    outcome: success
    reward: 1.0
  - name: spill_fail
    when: "(spilled cup)"
    outcome: spilled
    reward: -1.0

reference_plan:
  - (heat-kettle r1 heater 2) # 60 -> 90
  - (open r1 heater)
  - (pour r1 heater cup)
  - (steep-tea r1 leaf cup)