id: t02_pour_then_steep
name: Two steps; pour then steep
description: |
  Kettle is hot and open; mug is open with teabag inside. Just pour, then steep.

meta:
  domain: kitchen
  enable_numeric: true
  enable_conditional: true
  enable_durations: true
  max_steps: 7
  time_limit: 5.5
  seed: 202
  init_fluents:
    - ["battery-cap", ["r1"], 8]
    - ["energy", ["r1"], 8]
    - ["water-temp", ["kettle"], 90.0]
  reward_shaping:
    mode: instant
    milestones:
      - {expr: "(has-hot-water mug)", reward: 0.10, once: true}
  clutter:
    budget: {min: 1, max: 4}
    items:
      - name: spoon
        types: [object]
        variants: [spoon1, spoon2, spoon3, spoon4]
        at: [kitchen]
        count: {min: 0, max: 3}
      - name: plate
        types: [object]
        at: [kitchen]
        count: {min: 0, max: 2}

objects:
  r1: robot
  kitchen: location
  mug:
    types: [container]
    variants: [mug1, cup, beaker, tumbler]
  kettle:
    types: [container, appliance]
    variants: [kettle1, boiler, samovar, urn]
  sachet:
    types: [object]
    variants: [teabag1, sachet, bag]

static_facts:
  - (openable kettle)

init:
  - (at r1 kitchen)
  - (obj-at mug kitchen)
  - (obj-at kettle kitchen)
  - (open kettle)
  - (in sachet mug)
  - (clear-hand r1)

termination:
  - name: success_tea
    when: "(tea-ready mug)"
    outcome: success
    reward: 1.0
  - name: spill_fail
    when: "(spilled mug)"
    outcome: spilled
    reward: -1.0

reference_plan:
  - (pour r1 kettle mug)
  - (steep-tea r1 sachet mug)