id: t06_fetch_teabag_simple_nav
name: Fetch teabag with simple navigation
description: |
  Teabag is in the pantry. Go get it, put it in the mug, then pour hot water and steep.
  Kettle is hot and closed (ready to pour). Cup is open by design.

meta:
  domain: kitchen
  enable_numeric: true
  enable_conditional: true
  enable_durations: true
  max_steps: 15
  time_limit: 11
  init_fluents:
    - ["battery-cap", ["r1"], 8]
    - ["energy", ["r1"], 8]
    - ["water-temp", ["heater"], 90.0]
  reward_shaping:
    mode: instant
    milestones:
      - {expr: "(holding r1 leaf)", reward: 0.05, once: true}
      - {expr: "(in leaf cup)", reward: 0.05, once: true}
      - {expr: "(has-hot-water cup)", reward: 0.10, once: true}
  clutter:
    budget: {min: 2, max: 5}
    items:
      - name: spoon
        types: [movable]
        variants: [spoon1, spoon2, spoon3]
        at: [kitchen]
        count: {min: 0, max: 2}
      - name: can
        types: [movable]
        variants: [can1, can2]
        at: [pantry]
        count: {min: 0, max: 2}
      - name: rag
        types: [movable]
        at: [kitchen]
        count: {min: 0, max: 1}

objects:
  r1: robot
  kitchen: location
  pantry: location
  cup:
    types: [container]
    variants: [mug1, cup, beaker, tumbler]
  heater:
    types: [container, appliance]
    variants: [kettle1, boiler, samovar, urn]
  leaf:
    types: [movable]
    variants: [teabag1, sachet]

static_facts:
  - (adjacent kitchen pantry)
  - (adjacent pantry kitchen)
  - (openable heater)
  - (pour-out-needs-closed heater)

init:
  - (at r1 kitchen)
  - (obj-at cup kitchen)
  - (obj-at heater kitchen)
  - (obj-at leaf pantry)
  - (clear-hand r1)
  - (has-water heater)

termination:
  - name: success_tea
    when: "(tea-ready cup)"
    outcome: success
    reward: 1.0
  - name: spill_fail
    when: "(spilled cup)"
    outcome: spilled
    reward: -1.0

reference_plan:
  - (move r1 kitchen pantry)
  - (pick-up r1 leaf)
  - (move r1 pantry kitchen)
  - (put-in r1 leaf cup)
  - (pour r1 heater cup)
  - (steep-tea r1 leaf cup)